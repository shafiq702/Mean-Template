'use strict';

var app = angular.module('main', ['ui.router', 'textAngular']);
app.config(function ($urlRouterProvider, $locationProvider) {
	// This turns off hashbang urls (/#about) and changes it to something normal (/about)
	// $locationProvider.html5Mode(true);
	// If we go to a URL that ui-router doesn't have registered, go to the "/" url.
	$urlRouterProvider.otherwise('/');
});

app.factory('AuthFactory', function ($http) {

	var currentUser;

	function extractData(res) {
		currentUser = res.data;
		return res.data;
	}

	var setCurrentUser = function setCurrentUser(user) {
		currentUser = user;
		return currentUser;
	};

	return {
		login: function login(creds) {
			return $http.post('/admin/login', creds).then(extractData).then(setCurrentUser);
		}
	};
});

app.controller('HomeCtrl', function ($scope) {
	//logic here
});

app.config(function ($stateProvider) {
	$stateProvider.state('HomeState', {
		url: '/',
		templateUrl: 'app/js/home/home.html',
		controller: 'HomeCtrl'
	});
});

app.controller('LoginCtrl', function ($scope, AuthFactory, $state) {
	$scope.submitLogin = function () {
		AuthFactory.login($scope.user).then(function () {
			$state.go('AdminState');
		}).then(function () {
			$scope.user = {};
		}).then(null, function (err) {
			console.log(err);
		});
	};
});

app.config(function ($stateProvider) {
	$stateProvider.state('LoginState', {
		url: '/login',
		templateUrl: 'app/js/login/login.html',
		controller: 'LoginCtrl'
	});
});

app.controller('CreateCtrl', function ($scope) {

	$scope.createPost = function () {
		console.log('button works', $scope.htmlVariable);
	};
});

app.config(function ($stateProvider) {
	$stateProvider.state('CreateState', {
		url: '/admin/posts/create',
		templateUrl: 'app/js/admin/blog/create.html',
		controller: 'CreateCtrl'
	});
});

app.controller('PostsCtrl', function ($scope) {});

app.config(function ($stateProvider) {
	$stateProvider.state('AdminPosts', {
		url: '/admin/posts',
		templateUrl: 'app/js/admin/blog/posts.html',
		controller: 'PostsCtrl'
	});
});

app.controller('AdminCtrl', function ($scope) {});

app.config(function ($stateProvider) {
	$stateProvider.state('AdminState', {
		url: '/admin',
		templateUrl: 'app/js/admin/dashboard/dashboard.html',
		controller: 'AdminCtrl'
	});
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGguZmFjdG9yeS5qcyIsImpzL2hvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwianMvaG9tZS9ob21lLnN0YXRlLmpzIiwianMvbG9naW4vbG9naW4uY29udHJvbGxlci5qcyIsImpzL2xvZ2luL2xvZ2luLnN0YXRlLmpzIiwianMvYWRtaW4vYmxvZy9jcmVhdGUuY29udHJvbGxlci5qcyIsImpzL2FkbWluL2Jsb2cvY3JlYXRlLnN0YXRlLmpzIiwianMvYWRtaW4vYmxvZy9wb3N0cy5jb250cm9sbGVyLmpzIiwianMvYWRtaW4vYmxvZy9wb3N0cy5zdGF0ZS5qcyIsImpzL2FkbWluL2Rhc2hib2FyZC9kYXNoYm9hcmQuY29udHJvbGxlci5qcyIsImpzL2FkbWluL2Rhc2hib2FyZC9kYXNoYm9hcmQuc3RhdGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBLEdBQUEsR0FBQSxPQUFBLENBQUEsTUFBQSxDQUFBLE1BQUEsRUFBQSxDQUFBLFdBQUEsRUFBQSxhQUFBLENBQUEsQ0FBQSxDQUFBO0FBQ0EsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGtCQUFBLEVBQUEsaUJBQUEsRUFBQTs7OztBQUlBLG1CQUFBLENBQUEsU0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ05BLEdBQUEsQ0FBQSxPQUFBLENBQUEsYUFBQSxFQUFBLFVBQUEsS0FBQSxFQUFBOztBQUVBLEtBQUEsV0FBQSxDQUFBOztBQUVBLFVBQUEsV0FBQSxDQUFBLEdBQUEsRUFBQTtBQUNBLGFBQUEsR0FBQSxHQUFBLENBQUEsSUFBQSxDQUFBO0FBQ0EsU0FBQSxHQUFBLENBQUEsSUFBQSxDQUFBO0VBQ0E7O0FBRUEsS0FBQSxjQUFBLEdBQUEsU0FBQSxjQUFBLENBQUEsSUFBQSxFQUFBO0FBQ0EsYUFBQSxHQUFBLElBQUEsQ0FBQTtBQUNBLFNBQUEsV0FBQSxDQUFBO0VBQ0EsQ0FBQTs7QUFFQSxRQUFBO0FBQ0EsT0FBQSxFQUFBLGVBQUEsS0FBQSxFQUFBO0FBQ0EsVUFBQSxLQUFBLENBQUEsSUFBQSxDQUFBLGNBQUEsRUFBQSxLQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsV0FBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLGNBQUEsQ0FBQSxDQUFBO0dBQ0E7RUFDQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ3JCQSxHQUFBLENBQUEsVUFBQSxDQUFBLFVBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQTs7Q0FFQSxDQUFBLENBQUE7O0FDRkEsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGNBQUEsRUFBQTtBQUNBLGVBQUEsQ0FBQSxLQUFBLENBQUEsV0FBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLEdBQUE7QUFDQSxhQUFBLEVBQUEsdUJBQUE7QUFDQSxZQUFBLEVBQUEsVUFBQTtFQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUNOQSxHQUFBLENBQUEsVUFBQSxDQUFBLFdBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQSxXQUFBLEVBQUEsTUFBQSxFQUFBO0FBQ0EsT0FBQSxDQUFBLFdBQUEsR0FBQSxZQUFBO0FBQ0EsYUFBQSxDQUFBLEtBQUEsQ0FBQSxNQUFBLENBQUEsSUFBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLFlBQUE7QUFDQSxTQUFBLENBQUEsRUFBQSxDQUFBLFlBQUEsQ0FBQSxDQUFBO0dBQ0EsQ0FBQSxDQUNBLElBQUEsQ0FBQSxZQUFBO0FBQ0EsU0FBQSxDQUFBLElBQUEsR0FBQSxFQUFBLENBQUE7R0FDQSxDQUFBLENBQ0EsSUFBQSxDQUFBLElBQUEsRUFBQSxVQUFBLEdBQUEsRUFBQTtBQUNBLFVBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLENBQUE7R0FDQSxDQUFBLENBQUE7RUFDQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ2JBLEdBQUEsQ0FBQSxNQUFBLENBQUEsVUFBQSxjQUFBLEVBQUE7QUFDQSxlQUFBLENBQUEsS0FBQSxDQUFBLFlBQUEsRUFBQTtBQUNBLEtBQUEsRUFBQSxRQUFBO0FBQ0EsYUFBQSxFQUFBLHlCQUFBO0FBQ0EsWUFBQSxFQUFBLFdBQUE7RUFDQSxDQUFBLENBQUE7Q0FDQSxDQUFBLENBQUE7O0FDTkEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxZQUFBLEVBQUEsVUFBQSxNQUFBLEVBQUE7O0FBRUEsT0FBQSxDQUFBLFVBQUEsR0FBQSxZQUFBO0FBQ0EsU0FBQSxDQUFBLEdBQUEsQ0FBQSxjQUFBLEVBQUEsTUFBQSxDQUFBLFlBQUEsQ0FBQSxDQUFBO0VBQ0EsQ0FBQTtDQUVBLENBQUEsQ0FBQTs7QUNOQSxHQUFBLENBQUEsTUFBQSxDQUFBLFVBQUEsY0FBQSxFQUFBO0FBQ0EsZUFBQSxDQUFBLEtBQUEsQ0FBQSxhQUFBLEVBQUE7QUFDQSxLQUFBLEVBQUEscUJBQUE7QUFDQSxhQUFBLEVBQUEsK0JBQUE7QUFDQSxZQUFBLEVBQUEsWUFBQTtFQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUNOQSxHQUFBLENBQUEsVUFBQSxDQUFBLFdBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQSxFQUNBLENBQUEsQ0FBQTs7QUNEQSxHQUFBLENBQUEsTUFBQSxDQUFBLFVBQUEsY0FBQSxFQUFBO0FBQ0EsZUFBQSxDQUFBLEtBQUEsQ0FBQSxZQUFBLEVBQUE7QUFDQSxLQUFBLEVBQUEsY0FBQTtBQUNBLGFBQUEsRUFBQSw4QkFBQTtBQUNBLFlBQUEsRUFBQSxXQUFBO0VBQ0EsQ0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ05BLEdBQUEsQ0FBQSxVQUFBLENBQUEsV0FBQSxFQUFBLFVBQUEsTUFBQSxFQUFBLEVBQ0EsQ0FBQSxDQUFBOztBQ0RBLEdBQUEsQ0FBQSxNQUFBLENBQUEsVUFBQSxjQUFBLEVBQUE7QUFDQSxlQUFBLENBQUEsS0FBQSxDQUFBLFlBQUEsRUFBQTtBQUNBLEtBQUEsRUFBQSxRQUFBO0FBQ0EsYUFBQSxFQUFBLHVDQUFBO0FBQ0EsWUFBQSxFQUFBLFdBQUE7RUFDQSxDQUFBLENBQUE7Q0FDQSxDQUFBLENBQUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbWFpbicsIFsndWkucm91dGVyJywgJ3RleHRBbmd1bGFyJ10pO1xuYXBwLmNvbmZpZyhmdW5jdGlvbigkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKXtcblx0Ly8gVGhpcyB0dXJucyBvZmYgaGFzaGJhbmcgdXJscyAoLyNhYm91dCkgYW5kIGNoYW5nZXMgaXQgdG8gc29tZXRoaW5nIG5vcm1hbCAoL2Fib3V0KVxuXHQvLyAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cdC8vIElmIHdlIGdvIHRvIGEgVVJMIHRoYXQgdWktcm91dGVyIGRvZXNuJ3QgaGF2ZSByZWdpc3RlcmVkLCBnbyB0byB0aGUgXCIvXCIgdXJsLlxuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG59KVxuIiwiYXBwLmZhY3RvcnkoJ0F1dGhGYWN0b3J5JyxmdW5jdGlvbigkaHR0cCl7XG5cbnZhciBjdXJyZW50VXNlcjtcblxuZnVuY3Rpb24gZXh0cmFjdERhdGEocmVzKXtcblx0XHRjdXJyZW50VXNlciA9IHJlcy5kYXRhO1xuXHRcdHJldHVybiByZXMuZGF0YTtcblx0fVxuXG5cdHZhciBzZXRDdXJyZW50VXNlciA9IGZ1bmN0aW9uKHVzZXIpe1xuXHRcdGN1cnJlbnRVc2VyID0gdXNlcjtcblx0XHRyZXR1cm4gY3VycmVudFVzZXJcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0bG9naW46IGZ1bmN0aW9uKGNyZWRzKXtcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYWRtaW4vbG9naW4nLCBjcmVkcylcblx0XHRcdC50aGVuKGV4dHJhY3REYXRhKVxuXHRcdFx0LnRoZW4oc2V0Q3VycmVudFVzZXIpXG5cdFx0fVxuICB9XG59KVxuIiwiYXBwLmNvbnRyb2xsZXIoJ0hvbWVDdHJsJywgZnVuY3Rpb24oJHNjb3BlKXtcbiAgLy9sb2dpYyBoZXJlXG59KTtcbiIsImFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG5cdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdIb21lU3RhdGUnLCB7XG5cdFx0dXJsOiAnLycsXG5cdFx0dGVtcGxhdGVVcmw6ICdhcHAvanMvaG9tZS9ob21lLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdIb21lQ3RybCdcblx0fSk7XG59KTtcbiIsImFwcC5jb250cm9sbGVyKCdMb2dpbkN0cmwnLCBmdW5jdGlvbigkc2NvcGUsIEF1dGhGYWN0b3J5LCAkc3RhdGUpe1xuICAkc2NvcGUuc3VibWl0TG9naW4gPSBmdW5jdGlvbigpe1xuXHRcdEF1dGhGYWN0b3J5LmxvZ2luKCRzY29wZS51c2VyKVxuXHRcdC50aGVuKGZ1bmN0aW9uKCl7XG5cdFx0XHQkc3RhdGUuZ28oJ0FkbWluU3RhdGUnKVxuXHRcdH0pXG5cdFx0LnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdCRzY29wZS51c2VyID0ge307XG5cdFx0fSlcblx0XHQudGhlbihudWxsLCBmdW5jdGlvbihlcnIpe1xuXHRcdFx0Y29uc29sZS5sb2coZXJyKVxuXHRcdH0pXG5cdH1cbn0pO1xuIiwiYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcblx0JHN0YXRlUHJvdmlkZXIuc3RhdGUoJ0xvZ2luU3RhdGUnLCB7XG5cdFx0dXJsOiAnL2xvZ2luJyxcblx0XHR0ZW1wbGF0ZVVybDogJ2FwcC9qcy9sb2dpbi9sb2dpbi5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnTG9naW5DdHJsJ1xuXHR9KTtcbn0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ0NyZWF0ZUN0cmwnLCBmdW5jdGlvbigkc2NvcGUpe1xuXG4gICRzY29wZS5jcmVhdGVQb3N0ID0gZnVuY3Rpb24oKXtcbiAgICBjb25zb2xlLmxvZygnYnV0dG9uIHdvcmtzJywgJHNjb3BlLmh0bWxWYXJpYWJsZSlcbiAgfVxuXG59KTtcbiIsImFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG5cdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdDcmVhdGVTdGF0ZScsIHtcbiAgICAgICAgICAgIHVybDogJy9hZG1pbi9wb3N0cy9jcmVhdGUnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvanMvYWRtaW4vYmxvZy9jcmVhdGUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ3JlYXRlQ3RybCdcbiAgICAgICAgfSlcbn0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ1Bvc3RzQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSl7XG59KTtcbiIsImFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG5cdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdBZG1pblBvc3RzJywge1xuICAgICAgICAgICAgdXJsOiAnL2FkbWluL3Bvc3RzJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2pzL2FkbWluL2Jsb2cvcG9zdHMuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUG9zdHNDdHJsJ1xuICAgICAgICB9KVxufSk7XG4iLCJhcHAuY29udHJvbGxlcignQWRtaW5DdHJsJywgZnVuY3Rpb24oJHNjb3BlKXtcbn0pO1xuIiwiYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcblx0JHN0YXRlUHJvdmlkZXIuc3RhdGUoJ0FkbWluU3RhdGUnLCB7XG5cdFx0dXJsOiAnL2FkbWluJyxcblx0XHR0ZW1wbGF0ZVVybDogJ2FwcC9qcy9hZG1pbi9kYXNoYm9hcmQvZGFzaGJvYXJkLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdBZG1pbkN0cmwnXG5cdH0pXG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
