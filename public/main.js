'use strict';

var app = angular.module('main', ['ui.router']);
app.config(function ($urlRouterProvider, $locationProvider) {
	// This turns off hashbang urls (/#about) and changes it to something normal (/about)
	// $locationProvider.html5Mode(true);
	// If we go to a URL that ui-router doesn't have registered, go to the "/" url.
	$urlRouterProvider.otherwise('/');
});

app.factory('AuthFactory', function ($http) {

	var currentUser;

	function extractData(res) {
		currentUser = res.data;
		return res.data;
	}

	var setCurrentUser = function setCurrentUser(user) {
		currentUser = user;
		return currentUser;
	};

	return {
		login: function login(creds) {
			return $http.post('/admin/login', creds).then(extractData).then(setCurrentUser);
		}
	};
});

app.controller('HomeCtrl', function ($scope) {
	//logic here
});

app.config(function ($stateProvider) {
	$stateProvider.state('HomeState', {
		url: '/',
		templateUrl: 'app/js/home/home.html',
		controller: 'HomeCtrl'
	});
});

app.controller('LoginCtrl', function ($scope, AuthFactory, $state) {
	$scope.submitLogin = function () {
		AuthFactory.login($scope.user).then(function () {
			$state.go('AdminState');
		}).then(function () {
			$scope.user = {};
		}).then(null, function (err) {
			console.log(err);
		});
	};
});

app.config(function ($stateProvider) {
	$stateProvider.state('LoginState', {
		url: '/login',
		templateUrl: 'app/js/login/login.html',
		controller: 'LoginCtrl'
	});
});

app.controller('CreateCtrl', function ($scope) {
	tinymce.init({
		selector: 'textarea',
		height: 500,
		theme: 'modern',
		plugins: ['advlist autolink lists link image charmap print preview hr anchor pagebreak', 'searchreplace wordcount visualblocks visualchars code fullscreen', 'insertdatetime media nonbreaking save table contextmenu directionality', 'emoticons template paste textcolor colorpicker textpattern imagetools'],
		toolbar1: 'insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media | forecolor backcolor emoticons',
		image_advtab: true,
		templates: [{ title: 'Test template 1', content: 'Test 1' }, { title: 'Test template 2', content: 'Test 2' }],
		content_css: ['//fast.fonts.net/cssapi/e6dc9b99-64fe-4292-ad98-6974f93cd2a2.css', '//www.tinymce.com/css/codepen.min.css']
	});
});

app.config(function ($stateProvider) {
	$stateProvider.state('CreateState', {
		url: '/admin/posts/create',
		templateUrl: 'app/js/admin/blog/create.html',
		controller: 'CreateCtrl'
	});
});

app.controller('PostsCtrl', function ($scope) {});

app.config(function ($stateProvider) {
	$stateProvider.state('AdminPosts', {
		url: '/admin/posts',
		templateUrl: 'app/js/admin/blog/posts.html',
		controller: 'PostsCtrl'
	});
});

app.controller('AdminCtrl', function ($scope) {});

app.config(function ($stateProvider) {
	$stateProvider.state('AdminState', {
		url: '/admin',
		templateUrl: 'app/js/admin/dashboard/dashboard.html',
		controller: 'AdminCtrl'
	});
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGguZmFjdG9yeS5qcyIsImpzL2hvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwianMvaG9tZS9ob21lLnN0YXRlLmpzIiwianMvbG9naW4vbG9naW4uY29udHJvbGxlci5qcyIsImpzL2xvZ2luL2xvZ2luLnN0YXRlLmpzIiwianMvYWRtaW4vYmxvZy9jcmVhdGUuY29udHJvbGxlci5qcyIsImpzL2FkbWluL2Jsb2cvY3JlYXRlLnN0YXRlLmpzIiwianMvYWRtaW4vYmxvZy9wb3N0cy5jb250cm9sbGVyLmpzIiwianMvYWRtaW4vYmxvZy9wb3N0cy5zdGF0ZS5qcyIsImpzL2FkbWluL2Rhc2hib2FyZC9kYXNoYm9hcmQuY29udHJvbGxlci5qcyIsImpzL2FkbWluL2Rhc2hib2FyZC9kYXNoYm9hcmQuc3RhdGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFBLEdBQUEsR0FBQSxPQUFBLENBQUEsTUFBQSxDQUFBLE1BQUEsRUFBQSxDQUFBLFdBQUEsQ0FBQSxDQUFBLENBQUE7QUFDQSxHQUFBLENBQUEsTUFBQSxDQUFBLFVBQUEsa0JBQUEsRUFBQSxpQkFBQSxFQUFBOzs7O0FBSUEsbUJBQUEsQ0FBQSxTQUFBLENBQUEsR0FBQSxDQUFBLENBQUE7Q0FDQSxDQUFBLENBQUE7O0FDTkEsR0FBQSxDQUFBLE9BQUEsQ0FBQSxhQUFBLEVBQUEsVUFBQSxLQUFBLEVBQUE7O0FBRUEsS0FBQSxXQUFBLENBQUE7O0FBRUEsVUFBQSxXQUFBLENBQUEsR0FBQSxFQUFBO0FBQ0EsYUFBQSxHQUFBLEdBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxTQUFBLEdBQUEsQ0FBQSxJQUFBLENBQUE7RUFDQTs7QUFFQSxLQUFBLGNBQUEsR0FBQSxTQUFBLGNBQUEsQ0FBQSxJQUFBLEVBQUE7QUFDQSxhQUFBLEdBQUEsSUFBQSxDQUFBO0FBQ0EsU0FBQSxXQUFBLENBQUE7RUFDQSxDQUFBOztBQUVBLFFBQUE7QUFDQSxPQUFBLEVBQUEsZUFBQSxLQUFBLEVBQUE7QUFDQSxVQUFBLEtBQUEsQ0FBQSxJQUFBLENBQUEsY0FBQSxFQUFBLEtBQUEsQ0FBQSxDQUNBLElBQUEsQ0FBQSxXQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsY0FBQSxDQUFBLENBQUE7R0FDQTtFQUNBLENBQUE7Q0FDQSxDQUFBLENBQUE7O0FDckJBLEdBQUEsQ0FBQSxVQUFBLENBQUEsVUFBQSxFQUFBLFVBQUEsTUFBQSxFQUFBOztDQUVBLENBQUEsQ0FBQTs7QUNGQSxHQUFBLENBQUEsTUFBQSxDQUFBLFVBQUEsY0FBQSxFQUFBO0FBQ0EsZUFBQSxDQUFBLEtBQUEsQ0FBQSxXQUFBLEVBQUE7QUFDQSxLQUFBLEVBQUEsR0FBQTtBQUNBLGFBQUEsRUFBQSx1QkFBQTtBQUNBLFlBQUEsRUFBQSxVQUFBO0VBQ0EsQ0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ05BLEdBQUEsQ0FBQSxVQUFBLENBQUEsV0FBQSxFQUFBLFVBQUEsTUFBQSxFQUFBLFdBQUEsRUFBQSxNQUFBLEVBQUE7QUFDQSxPQUFBLENBQUEsV0FBQSxHQUFBLFlBQUE7QUFDQSxhQUFBLENBQUEsS0FBQSxDQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsWUFBQTtBQUNBLFNBQUEsQ0FBQSxFQUFBLENBQUEsWUFBQSxDQUFBLENBQUE7R0FDQSxDQUFBLENBQ0EsSUFBQSxDQUFBLFlBQUE7QUFDQSxTQUFBLENBQUEsSUFBQSxHQUFBLEVBQUEsQ0FBQTtHQUNBLENBQUEsQ0FDQSxJQUFBLENBQUEsSUFBQSxFQUFBLFVBQUEsR0FBQSxFQUFBO0FBQ0EsVUFBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQTtHQUNBLENBQUEsQ0FBQTtFQUNBLENBQUE7Q0FDQSxDQUFBLENBQUE7O0FDYkEsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGNBQUEsRUFBQTtBQUNBLGVBQUEsQ0FBQSxLQUFBLENBQUEsWUFBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLFFBQUE7QUFDQSxhQUFBLEVBQUEseUJBQUE7QUFDQSxZQUFBLEVBQUEsV0FBQTtFQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUNOQSxHQUFBLENBQUEsVUFBQSxDQUFBLFlBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQTtBQUNBLFFBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxVQUFBLEVBQUEsVUFBQTtBQUNBLFFBQUEsRUFBQSxHQUFBO0FBQ0EsT0FBQSxFQUFBLFFBQUE7QUFDQSxTQUFBLEVBQUEsQ0FDQSw2RUFBQSxFQUNBLGtFQUFBLEVBQ0Esd0VBQUEsRUFDQSx1RUFBQSxDQUNBO0FBQ0EsVUFBQSxFQUFBLHNNQUFBO0FBQ0EsY0FBQSxFQUFBLElBQUE7QUFDQSxXQUFBLEVBQUEsQ0FDQSxFQUFBLEtBQUEsRUFBQSxpQkFBQSxFQUFBLE9BQUEsRUFBQSxRQUFBLEVBQUEsRUFDQSxFQUFBLEtBQUEsRUFBQSxpQkFBQSxFQUFBLE9BQUEsRUFBQSxRQUFBLEVBQUEsQ0FDQTtBQUNBLGFBQUEsRUFBQSxDQUNBLGtFQUFBLEVBQ0EsdUNBQUEsQ0FDQTtFQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUN0QkEsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGNBQUEsRUFBQTtBQUNBLGVBQUEsQ0FBQSxLQUFBLENBQUEsYUFBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLHFCQUFBO0FBQ0EsYUFBQSxFQUFBLCtCQUFBO0FBQ0EsWUFBQSxFQUFBLFlBQUE7RUFDQSxDQUFBLENBQUE7Q0FDQSxDQUFBLENBQUE7O0FDTkEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxXQUFBLEVBQUEsVUFBQSxNQUFBLEVBQUEsRUFDQSxDQUFBLENBQUE7O0FDREEsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGNBQUEsRUFBQTtBQUNBLGVBQUEsQ0FBQSxLQUFBLENBQUEsWUFBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLGNBQUE7QUFDQSxhQUFBLEVBQUEsOEJBQUE7QUFDQSxZQUFBLEVBQUEsV0FBQTtFQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUNOQSxHQUFBLENBQUEsVUFBQSxDQUFBLFdBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQSxFQUNBLENBQUEsQ0FBQTs7QUNEQSxHQUFBLENBQUEsTUFBQSxDQUFBLFVBQUEsY0FBQSxFQUFBO0FBQ0EsZUFBQSxDQUFBLEtBQUEsQ0FBQSxZQUFBLEVBQUE7QUFDQSxLQUFBLEVBQUEsUUFBQTtBQUNBLGFBQUEsRUFBQSx1Q0FBQTtBQUNBLFlBQUEsRUFBQSxXQUFBO0VBQ0EsQ0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBIiwiZmlsZSI6Im1haW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgYXBwID0gYW5ndWxhci5tb2R1bGUoJ21haW4nLCBbJ3VpLnJvdXRlciddKTtcbmFwcC5jb25maWcoZnVuY3Rpb24oJHVybFJvdXRlclByb3ZpZGVyLCAkbG9jYXRpb25Qcm92aWRlcil7XG5cdC8vIFRoaXMgdHVybnMgb2ZmIGhhc2hiYW5nIHVybHMgKC8jYWJvdXQpIGFuZCBjaGFuZ2VzIGl0IHRvIHNvbWV0aGluZyBub3JtYWwgKC9hYm91dClcblx0Ly8gJGxvY2F0aW9uUHJvdmlkZXIuaHRtbDVNb2RlKHRydWUpO1xuXHQvLyBJZiB3ZSBnbyB0byBhIFVSTCB0aGF0IHVpLXJvdXRlciBkb2Vzbid0IGhhdmUgcmVnaXN0ZXJlZCwgZ28gdG8gdGhlIFwiL1wiIHVybC5cbiAgJHVybFJvdXRlclByb3ZpZGVyLm90aGVyd2lzZSgnLycpO1xufSlcbiIsImFwcC5mYWN0b3J5KCdBdXRoRmFjdG9yeScsZnVuY3Rpb24oJGh0dHApe1xuXG52YXIgY3VycmVudFVzZXI7XG5cbmZ1bmN0aW9uIGV4dHJhY3REYXRhKHJlcyl7XG5cdFx0Y3VycmVudFVzZXIgPSByZXMuZGF0YTtcblx0XHRyZXR1cm4gcmVzLmRhdGE7XG5cdH1cblxuXHR2YXIgc2V0Q3VycmVudFVzZXIgPSBmdW5jdGlvbih1c2VyKXtcblx0XHRjdXJyZW50VXNlciA9IHVzZXI7XG5cdFx0cmV0dXJuIGN1cnJlbnRVc2VyXG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdGxvZ2luOiBmdW5jdGlvbihjcmVkcyl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FkbWluL2xvZ2luJywgY3JlZHMpXG5cdFx0XHQudGhlbihleHRyYWN0RGF0YSlcblx0XHRcdC50aGVuKHNldEN1cnJlbnRVc2VyKVxuXHRcdH1cbiAgfVxufSlcbiIsImFwcC5jb250cm9sbGVyKCdIb21lQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSl7XG4gIC8vbG9naWMgaGVyZVxufSk7XG4iLCJhcHAuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuXHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnSG9tZVN0YXRlJywge1xuXHRcdHVybDogJy8nLFxuXHRcdHRlbXBsYXRlVXJsOiAnYXBwL2pzL2hvbWUvaG9tZS5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnSG9tZUN0cmwnXG5cdH0pO1xufSk7XG4iLCJhcHAuY29udHJvbGxlcignTG9naW5DdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBBdXRoRmFjdG9yeSwgJHN0YXRlKXtcbiAgJHNjb3BlLnN1Ym1pdExvZ2luID0gZnVuY3Rpb24oKXtcblx0XHRBdXRoRmFjdG9yeS5sb2dpbigkc2NvcGUudXNlcilcblx0XHQudGhlbihmdW5jdGlvbigpe1xuXHRcdFx0JHN0YXRlLmdvKCdBZG1pblN0YXRlJylcblx0XHR9KVxuXHRcdC50aGVuKGZ1bmN0aW9uKCl7XG5cdFx0XHQkc2NvcGUudXNlciA9IHt9O1xuXHRcdH0pXG5cdFx0LnRoZW4obnVsbCwgZnVuY3Rpb24oZXJyKXtcblx0XHRcdGNvbnNvbGUubG9nKGVycilcblx0XHR9KVxuXHR9XG59KTtcbiIsImFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG5cdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdMb2dpblN0YXRlJywge1xuXHRcdHVybDogJy9sb2dpbicsXG5cdFx0dGVtcGxhdGVVcmw6ICdhcHAvanMvbG9naW4vbG9naW4uaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ0xvZ2luQ3RybCdcblx0fSk7XG59KTtcbiIsImFwcC5jb250cm9sbGVyKCdDcmVhdGVDdHJsJywgZnVuY3Rpb24oJHNjb3BlKXtcbiAgdGlueW1jZS5pbml0KHtcbiAgICBzZWxlY3RvcjogJ3RleHRhcmVhJyxcbiAgICBoZWlnaHQ6IDUwMCxcbiAgICB0aGVtZTogJ21vZGVybicsXG4gICAgcGx1Z2luczogW1xuICAgICAgJ2Fkdmxpc3QgYXV0b2xpbmsgbGlzdHMgbGluayBpbWFnZSBjaGFybWFwIHByaW50IHByZXZpZXcgaHIgYW5jaG9yIHBhZ2VicmVhaycsXG4gICAgICAnc2VhcmNocmVwbGFjZSB3b3JkY291bnQgdmlzdWFsYmxvY2tzIHZpc3VhbGNoYXJzIGNvZGUgZnVsbHNjcmVlbicsXG4gICAgICAnaW5zZXJ0ZGF0ZXRpbWUgbWVkaWEgbm9uYnJlYWtpbmcgc2F2ZSB0YWJsZSBjb250ZXh0bWVudSBkaXJlY3Rpb25hbGl0eScsXG4gICAgICAnZW1vdGljb25zIHRlbXBsYXRlIHBhc3RlIHRleHRjb2xvciBjb2xvcnBpY2tlciB0ZXh0cGF0dGVybiBpbWFnZXRvb2xzJ1xuICAgIF0sXG4gICAgdG9vbGJhcjE6ICdpbnNlcnRmaWxlIHVuZG8gcmVkbyB8IHN0eWxlc2VsZWN0IHwgYm9sZCBpdGFsaWMgfCBhbGlnbmxlZnQgYWxpZ25jZW50ZXIgYWxpZ25yaWdodCBhbGlnbmp1c3RpZnkgfCBidWxsaXN0IG51bWxpc3Qgb3V0ZGVudCBpbmRlbnQgfCBsaW5rIGltYWdlIHwgcHJpbnQgcHJldmlldyBtZWRpYSB8IGZvcmVjb2xvciBiYWNrY29sb3IgZW1vdGljb25zJyxcbiAgICBpbWFnZV9hZHZ0YWI6IHRydWUsXG4gICAgdGVtcGxhdGVzOiBbXG4gICAgICB7IHRpdGxlOiAnVGVzdCB0ZW1wbGF0ZSAxJywgY29udGVudDogJ1Rlc3QgMScgfSxcbiAgICAgIHsgdGl0bGU6ICdUZXN0IHRlbXBsYXRlIDInLCBjb250ZW50OiAnVGVzdCAyJyB9XG4gICAgXSxcbiAgICBjb250ZW50X2NzczogW1xuICAgICAgJy8vZmFzdC5mb250cy5uZXQvY3NzYXBpL2U2ZGM5Yjk5LTY0ZmUtNDI5Mi1hZDk4LTY5NzRmOTNjZDJhMi5jc3MnLFxuICAgICAgJy8vd3d3LnRpbnltY2UuY29tL2Nzcy9jb2RlcGVuLm1pbi5jc3MnXG4gICAgXVxuICAgfSk7XG59KTtcbiIsImFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG5cdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdDcmVhdGVTdGF0ZScsIHtcbiAgICAgICAgICAgIHVybDogJy9hZG1pbi9wb3N0cy9jcmVhdGUnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvanMvYWRtaW4vYmxvZy9jcmVhdGUuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnQ3JlYXRlQ3RybCdcbiAgICAgICAgfSlcbn0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ1Bvc3RzQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSl7XG59KTtcbiIsImFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG5cdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdBZG1pblBvc3RzJywge1xuICAgICAgICAgICAgdXJsOiAnL2FkbWluL3Bvc3RzJyxcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnYXBwL2pzL2FkbWluL2Jsb2cvcG9zdHMuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUG9zdHNDdHJsJ1xuICAgICAgICB9KVxufSk7XG4iLCJhcHAuY29udHJvbGxlcignQWRtaW5DdHJsJywgZnVuY3Rpb24oJHNjb3BlKXtcbn0pO1xuIiwiYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcblx0JHN0YXRlUHJvdmlkZXIuc3RhdGUoJ0FkbWluU3RhdGUnLCB7XG5cdFx0dXJsOiAnL2FkbWluJyxcblx0XHR0ZW1wbGF0ZVVybDogJ2FwcC9qcy9hZG1pbi9kYXNoYm9hcmQvZGFzaGJvYXJkLmh0bWwnLFxuICAgIGNvbnRyb2xsZXI6ICdBZG1pbkN0cmwnXG5cdH0pXG59KTtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
