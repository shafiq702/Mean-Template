'use strict';

var app = angular.module('main', ['ui.router']);
app.config(function ($urlRouterProvider, $locationProvider) {
	// This turns off hashbang urls (/#about) and changes it to something normal (/about)
	// $locationProvider.html5Mode(true);
	// If we go to a URL that ui-router doesn't have registered, go to the "/" url.
	$urlRouterProvider.otherwise('/');
});

app.factory('AuthFactory', function ($http) {

	var currentUser;

	function extractData(res) {
		currentUser = res.data;
		return res.data;
	}

	var setCurrentUser = function setCurrentUser(user) {
		currentUser = user;
		return user;
	};

	return {
		login: function login(creds) {
			return $http.post('/admin/login', creds).then(extractData).then(setCurrentUser);
		}
	};
});

app.controller('HomeCtrl', function ($scope) {
	//logic here
});

app.config(function ($stateProvider) {
	$stateProvider.state('HomeState', {
		url: '/',
		templateUrl: 'app/js/home/home.html',
		controller: 'HomeCtrl'
	});
});

app.controller('LoginCtrl', function ($scope, AuthFactory) {
	$scope.submitLogin = function () {
		AuthFactory.login($scope.user).then(function () {
			$state.go('dashboard');
		}).then(function () {
			$scope.user = {};
		}).then(null, function (err) {
			console.log(err);
		});
	};
});

app.config(function ($stateProvider) {
	$stateProvider.state('LoginState', {
		url: '/login',
		templateUrl: 'app/js/login/login.html',
		controller: 'LoginCtrl'
	});
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGguZmFjdG9yeS5qcyIsImpzL2hvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwianMvaG9tZS9ob21lLnN0YXRlLmpzIiwianMvbG9naW4vbG9naW4uY29udHJvbGxlci5qcyIsImpzL2xvZ2luL2xvZ2luLnN0YXRlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQSxHQUFBLEdBQUEsT0FBQSxDQUFBLE1BQUEsQ0FBQSxNQUFBLEVBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQSxDQUFBO0FBQ0EsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGtCQUFBLEVBQUEsaUJBQUEsRUFBQTs7OztBQUlBLG1CQUFBLENBQUEsU0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ05BLEdBQUEsQ0FBQSxPQUFBLENBQUEsYUFBQSxFQUFBLFVBQUEsS0FBQSxFQUFBOztBQUVBLEtBQUEsV0FBQSxDQUFBOztBQUVBLFVBQUEsV0FBQSxDQUFBLEdBQUEsRUFBQTtBQUNBLGFBQUEsR0FBQSxHQUFBLENBQUEsSUFBQSxDQUFBO0FBQ0EsU0FBQSxHQUFBLENBQUEsSUFBQSxDQUFBO0VBQ0E7O0FBRUEsS0FBQSxjQUFBLEdBQUEsU0FBQSxjQUFBLENBQUEsSUFBQSxFQUFBO0FBQ0EsYUFBQSxHQUFBLElBQUEsQ0FBQTtBQUNBLFNBQUEsSUFBQSxDQUFBO0VBQ0EsQ0FBQTs7QUFFQSxRQUFBO0FBQ0EsT0FBQSxFQUFBLGVBQUEsS0FBQSxFQUFBO0FBQ0EsVUFBQSxLQUFBLENBQUEsSUFBQSxDQUFBLGNBQUEsRUFBQSxLQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsV0FBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLGNBQUEsQ0FBQSxDQUFBO0dBQ0E7RUFDQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ3JCQSxHQUFBLENBQUEsVUFBQSxDQUFBLFVBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQTs7Q0FFQSxDQUFBLENBQUE7O0FDRkEsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGNBQUEsRUFBQTtBQUNBLGVBQUEsQ0FBQSxLQUFBLENBQUEsV0FBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLEdBQUE7QUFDQSxhQUFBLEVBQUEsdUJBQUE7QUFDQSxZQUFBLEVBQUEsVUFBQTtFQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUNOQSxHQUFBLENBQUEsVUFBQSxDQUFBLFdBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQSxXQUFBLEVBQUE7QUFDQSxPQUFBLENBQUEsV0FBQSxHQUFBLFlBQUE7QUFDQSxhQUFBLENBQUEsS0FBQSxDQUFBLE1BQUEsQ0FBQSxJQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsWUFBQTtBQUNBLFNBQUEsQ0FBQSxFQUFBLENBQUEsV0FBQSxDQUFBLENBQUE7R0FDQSxDQUFBLENBQ0EsSUFBQSxDQUFBLFlBQUE7QUFDQSxTQUFBLENBQUEsSUFBQSxHQUFBLEVBQUEsQ0FBQTtHQUNBLENBQUEsQ0FDQSxJQUFBLENBQUEsSUFBQSxFQUFBLFVBQUEsR0FBQSxFQUFBO0FBQ0EsVUFBQSxDQUFBLEdBQUEsQ0FBQSxHQUFBLENBQUEsQ0FBQTtHQUNBLENBQUEsQ0FBQTtFQUNBLENBQUE7Q0FFQSxDQUFBLENBQUE7O0FDZEEsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGNBQUEsRUFBQTtBQUNBLGVBQUEsQ0FBQSxLQUFBLENBQUEsWUFBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLFFBQUE7QUFDQSxhQUFBLEVBQUEseUJBQUE7QUFDQSxZQUFBLEVBQUEsV0FBQTtFQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQSIsImZpbGUiOiJtYWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsidmFyIGFwcCA9IGFuZ3VsYXIubW9kdWxlKCdtYWluJywgWyd1aS5yb3V0ZXInXSk7XG5hcHAuY29uZmlnKGZ1bmN0aW9uKCR1cmxSb3V0ZXJQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpe1xuXHQvLyBUaGlzIHR1cm5zIG9mZiBoYXNoYmFuZyB1cmxzICgvI2Fib3V0KSBhbmQgY2hhbmdlcyBpdCB0byBzb21ldGhpbmcgbm9ybWFsICgvYWJvdXQpXG5cdC8vICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcblx0Ly8gSWYgd2UgZ28gdG8gYSBVUkwgdGhhdCB1aS1yb3V0ZXIgZG9lc24ndCBoYXZlIHJlZ2lzdGVyZWQsIGdvIHRvIHRoZSBcIi9cIiB1cmwuXG4gICR1cmxSb3V0ZXJQcm92aWRlci5vdGhlcndpc2UoJy8nKTtcbn0pXG4iLCJhcHAuZmFjdG9yeSgnQXV0aEZhY3RvcnknLGZ1bmN0aW9uKCRodHRwKXtcblxudmFyIGN1cnJlbnRVc2VyO1xuXG5mdW5jdGlvbiBleHRyYWN0RGF0YShyZXMpe1xuXHRcdGN1cnJlbnRVc2VyID0gcmVzLmRhdGE7XG5cdFx0cmV0dXJuIHJlcy5kYXRhO1xuXHR9XG5cdFxuXHR2YXIgc2V0Q3VycmVudFVzZXIgPSBmdW5jdGlvbih1c2VyKXtcblx0XHRjdXJyZW50VXNlciA9IHVzZXI7XG5cdFx0cmV0dXJuIHVzZXI7XG5cdH1cblxuXHRyZXR1cm4ge1xuXHRcdGxvZ2luOiBmdW5jdGlvbihjcmVkcyl7XG5cdFx0XHRyZXR1cm4gJGh0dHAucG9zdCgnL2FkbWluL2xvZ2luJywgY3JlZHMpXG5cdFx0XHQudGhlbihleHRyYWN0RGF0YSlcblx0XHRcdC50aGVuKHNldEN1cnJlbnRVc2VyKVxuXHRcdH1cbiAgfVxufSlcbiIsImFwcC5jb250cm9sbGVyKCdIb21lQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSl7XG4gIC8vbG9naWMgaGVyZVxufSk7XG4iLCJhcHAuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuXHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnSG9tZVN0YXRlJywge1xuXHRcdHVybDogJy8nLFxuXHRcdHRlbXBsYXRlVXJsOiAnYXBwL2pzL2hvbWUvaG9tZS5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnSG9tZUN0cmwnXG5cdH0pO1xufSk7XG4iLCJhcHAuY29udHJvbGxlcignTG9naW5DdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBBdXRoRmFjdG9yeSl7XG4gICRzY29wZS5zdWJtaXRMb2dpbiA9IGZ1bmN0aW9uKCl7XG5cdFx0QXV0aEZhY3RvcnkubG9naW4oJHNjb3BlLnVzZXIpXG5cdFx0LnRoZW4oZnVuY3Rpb24oKXtcblx0XHRcdCRzdGF0ZS5nbygnZGFzaGJvYXJkJylcblx0XHR9KVxuXHRcdC50aGVuKGZ1bmN0aW9uKCl7XG5cdFx0XHQkc2NvcGUudXNlciA9IHt9O1xuXHRcdH0pXG5cdFx0LnRoZW4obnVsbCwgZnVuY3Rpb24oZXJyKXtcblx0XHRcdGNvbnNvbGUubG9nKGVycilcblx0XHR9KVxuXHR9XG5cbn0pO1xuIiwiYXBwLmNvbmZpZyhmdW5jdGlvbiAoJHN0YXRlUHJvdmlkZXIpIHtcblx0JHN0YXRlUHJvdmlkZXIuc3RhdGUoJ0xvZ2luU3RhdGUnLCB7XG5cdFx0dXJsOiAnL2xvZ2luJyxcblx0XHR0ZW1wbGF0ZVVybDogJ2FwcC9qcy9sb2dpbi9sb2dpbi5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnTG9naW5DdHJsJ1xuXHR9KTtcbn0pO1xuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
