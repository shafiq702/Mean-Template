'use strict';

var app = angular.module('main', ['ui.router']);
app.config(function ($urlRouterProvider, $locationProvider) {
	// This turns off hashbang urls (/#about) and changes it to something normal (/about)
	// $locationProvider.html5Mode(true);
	// If we go to a URL that ui-router doesn't have registered, go to the "/" url.
	$urlRouterProvider.otherwise('/');
});

app.factory('AuthFactory', function ($http) {

	var currentUser;

	function extractData(res) {
		currentUser = res.data;
		return res.data;
	}

	var setCurrentUser = function setCurrentUser(user) {
		currentUser = user;
		return currentUser;
	};

	return {
		login: function login(creds) {
			return $http.post('/admin/login', creds).then(extractData).then(setCurrentUser);
		}
	};
});

app.controller('AdminCtrl', function ($scope) {});

app.config(function ($stateProvider) {
	$stateProvider.state('AdminState', {
		url: '/admin',
		templateUrl: 'app/js/admin-dashboard/admin-dashboard.html',
		controller: 'AdminCtrl'
	}).state('AdminState.posts', {
		url: '/posts',
		templateUrl: 'app/js/admin-dashboard/admin-posts.html',
		controller: 'PostsCtrl'
	});
});

app.controller('PostsCtrl', function ($scope) {
	tinymce.init({
		selector: 'textarea',
		height: 500,
		theme: 'modern',
		plugins: ['advlist autolink lists link image charmap print preview hr anchor pagebreak', 'searchreplace wordcount visualblocks visualchars code fullscreen', 'insertdatetime media nonbreaking save table contextmenu directionality', 'emoticons template paste textcolor colorpicker textpattern imagetools'],
		toolbar1: 'insertfile undo redo | styleselect | bold italic | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | link image | print preview media | forecolor backcolor emoticons',
		image_advtab: true,
		templates: [{ title: 'Test template 1', content: 'Test 1' }, { title: 'Test template 2', content: 'Test 2' }],
		content_css: ['//fast.fonts.net/cssapi/e6dc9b99-64fe-4292-ad98-6974f93cd2a2.css', '//www.tinymce.com/css/codepen.min.css']
	});
});

app.config(function ($stateProvider) {
	$stateProvider.state('AdminPosts', {
		url: '/admin/posts',
		templateUrl: 'app/js/admin-dashboard/admin-posts.html',
		controller: 'PostsCtrl'
	});
});

app.controller('LoginCtrl', function ($scope, AuthFactory, $state) {
	$scope.submitLogin = function () {
		AuthFactory.login($scope.user).then(function () {
			$state.go('AdminState');
		}).then(function () {
			$scope.user = {};
		}).then(null, function (err) {
			console.log(err);
		});
	};
});

app.config(function ($stateProvider) {
	$stateProvider.state('LoginState', {
		url: '/login',
		templateUrl: 'app/js/login/login.html',
		controller: 'LoginCtrl'
	});
});

app.controller('HomeCtrl', function ($scope) {
	//logic here
});

app.config(function ($stateProvider) {
	$stateProvider.state('HomeState', {
		url: '/',
		templateUrl: 'app/js/home/home.html',
		controller: 'HomeCtrl'
	});
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsImF1dGguZmFjdG9yeS5qcyIsImpzL2FkbWluLWRhc2hib2FyZC9hZG1pbi1kYXNoYm9hcmQuY29udHJvbGxlci5qcyIsImpzL2FkbWluLWRhc2hib2FyZC9hZG1pbi1kYXNoYm9hcmQuc3RhdGUuanMiLCJqcy9hZG1pbi1kYXNoYm9hcmQvYWRtaW4tcG9zdHMuY29udHJvbGxlci5qcyIsImpzL2FkbWluLWRhc2hib2FyZC9hZG1pbi1wb3N0cy5zdGF0ZS5qcyIsImpzL2xvZ2luL2xvZ2luLmNvbnRyb2xsZXIuanMiLCJqcy9sb2dpbi9sb2dpbi5zdGF0ZS5qcyIsImpzL2hvbWUvaG9tZS5jb250cm9sbGVyLmpzIiwianMvaG9tZS9ob21lLnN0YXRlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBQSxHQUFBLEdBQUEsT0FBQSxDQUFBLE1BQUEsQ0FBQSxNQUFBLEVBQUEsQ0FBQSxXQUFBLENBQUEsQ0FBQSxDQUFBO0FBQ0EsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGtCQUFBLEVBQUEsaUJBQUEsRUFBQTs7OztBQUlBLG1CQUFBLENBQUEsU0FBQSxDQUFBLEdBQUEsQ0FBQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ05BLEdBQUEsQ0FBQSxPQUFBLENBQUEsYUFBQSxFQUFBLFVBQUEsS0FBQSxFQUFBOztBQUVBLEtBQUEsV0FBQSxDQUFBOztBQUVBLFVBQUEsV0FBQSxDQUFBLEdBQUEsRUFBQTtBQUNBLGFBQUEsR0FBQSxHQUFBLENBQUEsSUFBQSxDQUFBO0FBQ0EsU0FBQSxHQUFBLENBQUEsSUFBQSxDQUFBO0VBQ0E7O0FBRUEsS0FBQSxjQUFBLEdBQUEsU0FBQSxjQUFBLENBQUEsSUFBQSxFQUFBO0FBQ0EsYUFBQSxHQUFBLElBQUEsQ0FBQTtBQUNBLFNBQUEsV0FBQSxDQUFBO0VBQ0EsQ0FBQTs7QUFFQSxRQUFBO0FBQ0EsT0FBQSxFQUFBLGVBQUEsS0FBQSxFQUFBO0FBQ0EsVUFBQSxLQUFBLENBQUEsSUFBQSxDQUFBLGNBQUEsRUFBQSxLQUFBLENBQUEsQ0FDQSxJQUFBLENBQUEsV0FBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLGNBQUEsQ0FBQSxDQUFBO0dBQ0E7RUFDQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ3JCQSxHQUFBLENBQUEsVUFBQSxDQUFBLFdBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQSxFQUNBLENBQUEsQ0FBQTs7QUNEQSxHQUFBLENBQUEsTUFBQSxDQUFBLFVBQUEsY0FBQSxFQUFBO0FBQ0EsZUFBQSxDQUFBLEtBQUEsQ0FBQSxZQUFBLEVBQUE7QUFDQSxLQUFBLEVBQUEsUUFBQTtBQUNBLGFBQUEsRUFBQSw2Q0FBQTtBQUNBLFlBQUEsRUFBQSxXQUFBO0VBQ0EsQ0FBQSxDQUNBLEtBQUEsQ0FBQSxrQkFBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLFFBQUE7QUFDQSxhQUFBLEVBQUEseUNBQUE7QUFDQSxZQUFBLEVBQUEsV0FBQTtFQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUNYQSxHQUFBLENBQUEsVUFBQSxDQUFBLFdBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQTtBQUNBLFFBQUEsQ0FBQSxJQUFBLENBQUE7QUFDQSxVQUFBLEVBQUEsVUFBQTtBQUNBLFFBQUEsRUFBQSxHQUFBO0FBQ0EsT0FBQSxFQUFBLFFBQUE7QUFDQSxTQUFBLEVBQUEsQ0FDQSw2RUFBQSxFQUNBLGtFQUFBLEVBQ0Esd0VBQUEsRUFDQSx1RUFBQSxDQUNBO0FBQ0EsVUFBQSxFQUFBLHNNQUFBO0FBQ0EsY0FBQSxFQUFBLElBQUE7QUFDQSxXQUFBLEVBQUEsQ0FDQSxFQUFBLEtBQUEsRUFBQSxpQkFBQSxFQUFBLE9BQUEsRUFBQSxRQUFBLEVBQUEsRUFDQSxFQUFBLEtBQUEsRUFBQSxpQkFBQSxFQUFBLE9BQUEsRUFBQSxRQUFBLEVBQUEsQ0FDQTtBQUNBLGFBQUEsRUFBQSxDQUNBLGtFQUFBLEVBQ0EsdUNBQUEsQ0FDQTtFQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUN0QkEsR0FBQSxDQUFBLE1BQUEsQ0FBQSxVQUFBLGNBQUEsRUFBQTtBQUNBLGVBQUEsQ0FBQSxLQUFBLENBQUEsWUFBQSxFQUFBO0FBQ0EsS0FBQSxFQUFBLGNBQUE7QUFDQSxhQUFBLEVBQUEseUNBQUE7QUFDQSxZQUFBLEVBQUEsV0FBQTtFQUNBLENBQUEsQ0FBQTtDQUNBLENBQUEsQ0FBQTs7QUNOQSxHQUFBLENBQUEsVUFBQSxDQUFBLFdBQUEsRUFBQSxVQUFBLE1BQUEsRUFBQSxXQUFBLEVBQUEsTUFBQSxFQUFBO0FBQ0EsT0FBQSxDQUFBLFdBQUEsR0FBQSxZQUFBO0FBQ0EsYUFBQSxDQUFBLEtBQUEsQ0FBQSxNQUFBLENBQUEsSUFBQSxDQUFBLENBQ0EsSUFBQSxDQUFBLFlBQUE7QUFDQSxTQUFBLENBQUEsRUFBQSxDQUFBLFlBQUEsQ0FBQSxDQUFBO0dBQ0EsQ0FBQSxDQUNBLElBQUEsQ0FBQSxZQUFBO0FBQ0EsU0FBQSxDQUFBLElBQUEsR0FBQSxFQUFBLENBQUE7R0FDQSxDQUFBLENBQ0EsSUFBQSxDQUFBLElBQUEsRUFBQSxVQUFBLEdBQUEsRUFBQTtBQUNBLFVBQUEsQ0FBQSxHQUFBLENBQUEsR0FBQSxDQUFBLENBQUE7R0FDQSxDQUFBLENBQUE7RUFDQSxDQUFBO0NBQ0EsQ0FBQSxDQUFBOztBQ2JBLEdBQUEsQ0FBQSxNQUFBLENBQUEsVUFBQSxjQUFBLEVBQUE7QUFDQSxlQUFBLENBQUEsS0FBQSxDQUFBLFlBQUEsRUFBQTtBQUNBLEtBQUEsRUFBQSxRQUFBO0FBQ0EsYUFBQSxFQUFBLHlCQUFBO0FBQ0EsWUFBQSxFQUFBLFdBQUE7RUFDQSxDQUFBLENBQUE7Q0FDQSxDQUFBLENBQUE7O0FDTkEsR0FBQSxDQUFBLFVBQUEsQ0FBQSxVQUFBLEVBQUEsVUFBQSxNQUFBLEVBQUE7O0NBRUEsQ0FBQSxDQUFBOztBQ0ZBLEdBQUEsQ0FBQSxNQUFBLENBQUEsVUFBQSxjQUFBLEVBQUE7QUFDQSxlQUFBLENBQUEsS0FBQSxDQUFBLFdBQUEsRUFBQTtBQUNBLEtBQUEsRUFBQSxHQUFBO0FBQ0EsYUFBQSxFQUFBLHVCQUFBO0FBQ0EsWUFBQSxFQUFBLFVBQUE7RUFDQSxDQUFBLENBQUE7Q0FDQSxDQUFBLENBQUEiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbInZhciBhcHAgPSBhbmd1bGFyLm1vZHVsZSgnbWFpbicsIFsndWkucm91dGVyJ10pO1xuYXBwLmNvbmZpZyhmdW5jdGlvbigkdXJsUm91dGVyUHJvdmlkZXIsICRsb2NhdGlvblByb3ZpZGVyKXtcblx0Ly8gVGhpcyB0dXJucyBvZmYgaGFzaGJhbmcgdXJscyAoLyNhYm91dCkgYW5kIGNoYW5nZXMgaXQgdG8gc29tZXRoaW5nIG5vcm1hbCAoL2Fib3V0KVxuXHQvLyAkbG9jYXRpb25Qcm92aWRlci5odG1sNU1vZGUodHJ1ZSk7XG5cdC8vIElmIHdlIGdvIHRvIGEgVVJMIHRoYXQgdWktcm91dGVyIGRvZXNuJ3QgaGF2ZSByZWdpc3RlcmVkLCBnbyB0byB0aGUgXCIvXCIgdXJsLlxuICAkdXJsUm91dGVyUHJvdmlkZXIub3RoZXJ3aXNlKCcvJyk7XG59KVxuIiwiYXBwLmZhY3RvcnkoJ0F1dGhGYWN0b3J5JyxmdW5jdGlvbigkaHR0cCl7XG5cbnZhciBjdXJyZW50VXNlcjtcblxuZnVuY3Rpb24gZXh0cmFjdERhdGEocmVzKXtcblx0XHRjdXJyZW50VXNlciA9IHJlcy5kYXRhO1xuXHRcdHJldHVybiByZXMuZGF0YTtcblx0fVxuXG5cdHZhciBzZXRDdXJyZW50VXNlciA9IGZ1bmN0aW9uKHVzZXIpe1xuXHRcdGN1cnJlbnRVc2VyID0gdXNlcjtcblx0XHRyZXR1cm4gY3VycmVudFVzZXJcblx0fVxuXG5cdHJldHVybiB7XG5cdFx0bG9naW46IGZ1bmN0aW9uKGNyZWRzKXtcblx0XHRcdHJldHVybiAkaHR0cC5wb3N0KCcvYWRtaW4vbG9naW4nLCBjcmVkcylcblx0XHRcdC50aGVuKGV4dHJhY3REYXRhKVxuXHRcdFx0LnRoZW4oc2V0Q3VycmVudFVzZXIpXG5cdFx0fVxuICB9XG59KVxuIiwiYXBwLmNvbnRyb2xsZXIoJ0FkbWluQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSl7XG59KTtcbiIsImFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG5cdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdBZG1pblN0YXRlJywge1xuXHRcdHVybDogJy9hZG1pbicsXG5cdFx0dGVtcGxhdGVVcmw6ICdhcHAvanMvYWRtaW4tZGFzaGJvYXJkL2FkbWluLWRhc2hib2FyZC5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnQWRtaW5DdHJsJ1xuXHR9KVxuXHQuc3RhdGUoJ0FkbWluU3RhdGUucG9zdHMnLCB7XG4gICAgICAgICAgICB1cmw6ICcvcG9zdHMnLFxuICAgICAgICAgICAgdGVtcGxhdGVVcmw6ICdhcHAvanMvYWRtaW4tZGFzaGJvYXJkL2FkbWluLXBvc3RzLmh0bWwnLFxuICAgICAgICAgICAgY29udHJvbGxlcjogJ1Bvc3RzQ3RybCdcbiAgICAgICAgfSlcbn0pO1xuIiwiYXBwLmNvbnRyb2xsZXIoJ1Bvc3RzQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSl7XG4gIHRpbnltY2UuaW5pdCh7XG4gICAgc2VsZWN0b3I6ICd0ZXh0YXJlYScsXG4gICAgaGVpZ2h0OiA1MDAsXG4gICAgdGhlbWU6ICdtb2Rlcm4nLFxuICAgIHBsdWdpbnM6IFtcbiAgICAgICdhZHZsaXN0IGF1dG9saW5rIGxpc3RzIGxpbmsgaW1hZ2UgY2hhcm1hcCBwcmludCBwcmV2aWV3IGhyIGFuY2hvciBwYWdlYnJlYWsnLFxuICAgICAgJ3NlYXJjaHJlcGxhY2Ugd29yZGNvdW50IHZpc3VhbGJsb2NrcyB2aXN1YWxjaGFycyBjb2RlIGZ1bGxzY3JlZW4nLFxuICAgICAgJ2luc2VydGRhdGV0aW1lIG1lZGlhIG5vbmJyZWFraW5nIHNhdmUgdGFibGUgY29udGV4dG1lbnUgZGlyZWN0aW9uYWxpdHknLFxuICAgICAgJ2Vtb3RpY29ucyB0ZW1wbGF0ZSBwYXN0ZSB0ZXh0Y29sb3IgY29sb3JwaWNrZXIgdGV4dHBhdHRlcm4gaW1hZ2V0b29scydcbiAgICBdLFxuICAgIHRvb2xiYXIxOiAnaW5zZXJ0ZmlsZSB1bmRvIHJlZG8gfCBzdHlsZXNlbGVjdCB8IGJvbGQgaXRhbGljIHwgYWxpZ25sZWZ0IGFsaWduY2VudGVyIGFsaWducmlnaHQgYWxpZ25qdXN0aWZ5IHwgYnVsbGlzdCBudW1saXN0IG91dGRlbnQgaW5kZW50IHwgbGluayBpbWFnZSB8IHByaW50IHByZXZpZXcgbWVkaWEgfCBmb3JlY29sb3IgYmFja2NvbG9yIGVtb3RpY29ucycsXG4gICAgaW1hZ2VfYWR2dGFiOiB0cnVlLFxuICAgIHRlbXBsYXRlczogW1xuICAgICAgeyB0aXRsZTogJ1Rlc3QgdGVtcGxhdGUgMScsIGNvbnRlbnQ6ICdUZXN0IDEnIH0sXG4gICAgICB7IHRpdGxlOiAnVGVzdCB0ZW1wbGF0ZSAyJywgY29udGVudDogJ1Rlc3QgMicgfVxuICAgIF0sXG4gICAgY29udGVudF9jc3M6IFtcbiAgICAgICcvL2Zhc3QuZm9udHMubmV0L2Nzc2FwaS9lNmRjOWI5OS02NGZlLTQyOTItYWQ5OC02OTc0ZjkzY2QyYTIuY3NzJyxcbiAgICAgICcvL3d3dy50aW55bWNlLmNvbS9jc3MvY29kZXBlbi5taW4uY3NzJ1xuICAgIF1cbiAgIH0pO1xufSk7XG4iLCJhcHAuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuXHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnQWRtaW5Qb3N0cycsIHtcbiAgICAgICAgICAgIHVybDogJy9hZG1pbi9wb3N0cycsXG4gICAgICAgICAgICB0ZW1wbGF0ZVVybDogJ2FwcC9qcy9hZG1pbi1kYXNoYm9hcmQvYWRtaW4tcG9zdHMuaHRtbCcsXG4gICAgICAgICAgICBjb250cm9sbGVyOiAnUG9zdHNDdHJsJ1xuICAgICAgICB9KVxufSk7XG4iLCJhcHAuY29udHJvbGxlcignTG9naW5DdHJsJywgZnVuY3Rpb24oJHNjb3BlLCBBdXRoRmFjdG9yeSwgJHN0YXRlKXtcbiAgJHNjb3BlLnN1Ym1pdExvZ2luID0gZnVuY3Rpb24oKXtcblx0XHRBdXRoRmFjdG9yeS5sb2dpbigkc2NvcGUudXNlcilcblx0XHQudGhlbihmdW5jdGlvbigpe1xuXHRcdFx0JHN0YXRlLmdvKCdBZG1pblN0YXRlJylcblx0XHR9KVxuXHRcdC50aGVuKGZ1bmN0aW9uKCl7XG5cdFx0XHQkc2NvcGUudXNlciA9IHt9O1xuXHRcdH0pXG5cdFx0LnRoZW4obnVsbCwgZnVuY3Rpb24oZXJyKXtcblx0XHRcdGNvbnNvbGUubG9nKGVycilcblx0XHR9KVxuXHR9XG59KTtcbiIsImFwcC5jb25maWcoZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XG5cdCRzdGF0ZVByb3ZpZGVyLnN0YXRlKCdMb2dpblN0YXRlJywge1xuXHRcdHVybDogJy9sb2dpbicsXG5cdFx0dGVtcGxhdGVVcmw6ICdhcHAvanMvbG9naW4vbG9naW4uaHRtbCcsXG4gICAgY29udHJvbGxlcjogJ0xvZ2luQ3RybCdcblx0fSk7XG59KTtcbiIsImFwcC5jb250cm9sbGVyKCdIb21lQ3RybCcsIGZ1bmN0aW9uKCRzY29wZSl7XG4gIC8vbG9naWMgaGVyZVxufSk7XG4iLCJhcHAuY29uZmlnKGZ1bmN0aW9uICgkc3RhdGVQcm92aWRlcikge1xuXHQkc3RhdGVQcm92aWRlci5zdGF0ZSgnSG9tZVN0YXRlJywge1xuXHRcdHVybDogJy8nLFxuXHRcdHRlbXBsYXRlVXJsOiAnYXBwL2pzL2hvbWUvaG9tZS5odG1sJyxcbiAgICBjb250cm9sbGVyOiAnSG9tZUN0cmwnXG5cdH0pO1xufSk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
